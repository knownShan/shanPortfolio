<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Details // Shan Games</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
    /* ================= ROOT & GLOBAL ================= */
    :root {
        --bg-black: #050505;
        --dark-grey: #1a1a1a;
        --medium-grey: #333333;
        --pixel-green: #39ff14;
        --pure-white: #ffffff;
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        background-color: var(--bg-black);
        color: var(--pure-white);
        font-family: 'VT323', monospace;
        line-height: 1.4;
        overflow-y: overlay;
    }

    /* ================= SCROLLBAR ================= */
    ::-webkit-scrollbar { width: 12px; }
    ::-webkit-scrollbar-track { background: var(--bg-black); }
    ::-webkit-scrollbar-thumb {
        background: var(--medium-grey);
        border: 2px solid var(--bg-black);
    }
    ::-webkit-scrollbar-thumb:hover { background: var(--pixel-green); }

    /* ================= NAV ================= */
    nav {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 5%;
        height: 90px;
        background: var(--dark-grey);
        border-bottom: 4px solid var(--medium-grey);
    }

    .nav-back {
        flex: 1;
        display: flex;
        align-items: center;
        gap: 10px;
        text-decoration: none;
        color: var(--pixel-green);
        font-family: 'Press Start 2P', cursive;
        font-size: 0.7rem;
        transition: 0.2s;
    }

    .nav-logo {
        font-family: 'Press Start 2P', cursive;
        font-size: 1.8rem;
        color: var(--pure-white);
        text-shadow: 2px 2px 0 var(--pixel-green);
        letter-spacing: 2px;
        text-decoration: none;
    }

    .nav-spacer { flex: 1; }

    /* ================= UNITY GAME CONTAINER (FIXED) ================= */
    .game-container {
        width: 90%;
        max-width: 1200px;
        margin: 40px auto;
        background: #000;
        border: 4px solid var(--medium-grey);
        position: relative;
        box-shadow: 0 0 30px rgba(57, 255, 20, 0.1);
        overflow: hidden;
    }

    /* Aspect-ratio lock (16:9 desktop) */
    .game-container::before {
        content: "";
        display: block;
        padding-top: 56.25%;
    }

    /* Force iframe to fully fill container */
    .game-container iframe {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;
        border: none;
    }

    /* ================= CONTROLS ================= */
    .controls-bar {
        width: 90%;
        max-width: 1200px;
        margin: -30px auto 40px;
        display: flex;
        justify-content: flex-end;
    }

    .fs-btn {
        background: none;
        border: 2px solid var(--medium-grey);
        color: var(--pixel-green);
        font-family: 'Press Start 2P', cursive;
        font-size: 0.6rem;
        padding: 8px 15px;
        cursor: pointer;
    }

    .fs-btn:hover {
        background: var(--pixel-green);
        color: var(--bg-black);
    }

    /* ================= CONTENT ================= */
    .content-area {
        width: 90%;
        max-width: 1200px;
        margin: 0 auto 100px;
        display: grid;
        grid-template-columns: 1fr 350px;
        gap: 50px;
        align-items: start;
    }

    .breadcrumbs {
        grid-column: 1 / -1;
        font-size: 1rem;
        color: var(--pixel-green);
        margin-bottom: 20px;
        text-transform: uppercase;
    }

    .game-title {
        font-family: 'Press Start 2P', cursive;
        font-size: 2.5rem;
        margin-bottom: 10px;
    }

    .dev-credit {
        font-size: 1.2rem;
        color: #888;
        margin-bottom: 15px;
    }

    .description {
        font-size: 1.5rem;
        color: #ccc;
        border-top: 2px solid var(--medium-grey);
        padding-top: 30px;
    }

    .poster-wrapper {
        width: 100%;
        aspect-ratio: 1 / 1.414;
        background: var(--dark-grey);
        border: 4px solid var(--medium-grey);
        box-shadow: 10px 10px 0 rgba(0,0,0,0.5);
        overflow: hidden;
    }

    .poster-img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
    }

    .tags-row {
        margin-top: 30px;
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
    }

    .tag {
        background: var(--medium-grey);
        padding: 5px 15px;
        font-size: 1rem;
    }

    /* ================= RESPONSIVE ================= */
    @media (max-width: 1024px) {
        .content-area {
            grid-template-columns: 1fr;
        }
        .poster-wrapper {
            max-width: 400px;
            margin: 0 auto;
        }
    }

    /* Mobile: switch Unity to 4:3 */
    @media (max-width: 768px) {
        .game-container::before {
            padding-top: 75%;
        }
    }
</style>

</head>
<body>

    <nav>
        <a href="index.html" class="nav-back"><i data-lucide="arrow-left"></i> BACK TO HOME</a>
        <a href="index.html" class="nav-logo">SHAN</a>
        <div class="nav-spacer"></div> 
    </nav>

    <main>
        <div class="game-container" id="unity-viewport">
            </div>
        <div class="controls-bar">
            <button class="fs-btn" onclick="openFullscreen()">FULLSCREEN</button>
        </div>

        <section class="content-area">
            <div class="breadcrumbs" id="game-breadcrumbs">Portfolio > My Game > Loading...</div>
            
            <div class="info-column">
                <div class="game-header">
                    <h1 class="game-title" id="game-title">LOADING...</h1>
                    <p class="dev-credit">by Shan</p>
                </div>

                <article class="description" id="game-description">
                    <p>Fetching game data...</p>
                </article>

                <div class="tags-row" id="game-tags"></div>
            </div>

            <div class="poster-column">
                <div class="poster-wrapper">
                    <img id="game-poster" src="" alt="Game Poster" class="poster-img">
                </div>
            </div>
        </section>
    </main>

    <script>
        const gameData = {
            "nestiny": {
                title: "NESTINY",
                buildPath: "GameBuilds/Nestiny/index.html",
                breadcrumbs: "Portfolio > My Game > Nestiny",
                description: `
                    <p>In Nestiny, you play as a chicken on a desperate quest to retrieve your scattered eggs. This isn't your average platformer; it's a test of precision and timing. Locate your missing eggs across handcrafted levels and bring them safely to the nest.</p>
                    <br>
                    <p>The goal is clear: satisfy the nest's egg requirement to unlock the path to the next level. But be warnedâ€”reaching the egg is only half the battle. Once picked up, the egg <strong>bounces on your back</strong>; if it hits its bounce limit before reaching the nest, it will be destroyed.</p>`,
                tags: ["2D PLATFORMER", "PIXEL ART", "CHALLENGING"],
                poster: "GamePictures/Nestiny Poster.jpg"
            },
            "think-inside-the-box": {
                title: "THINK INSIDE THE BOX",
                buildPath: "GameBuilds/Think Inside the Box/index.html",
                breadcrumbs: "Portfolio > My Game > Think Inside the Box",
                description: `
                    <p>Escape is the only option. In <strong>Think Inside the Box</strong>, you play as a sentient parcel trapped within a massive, automated shipping factory.</p>
                    <br>
                    <p>Navigate through hazardous assembly lines and solve complex environmental puzzles that require sharp thinking and precise movement. Each level increases in difficulty, introducing lethal traps, automated enemies, and industrial hazards.</p>
                    <br>
                    <p>Can you outsmart the factory machinery and earn your freedom, or will you be just another box on the shelf?
                    </p>`,
                tags: ["PUZZLE", "PLATFORMER", "FACTORY THEME"],
                poster: "GamePictures/Think Inside the Box Poster.jpg"
            },
            "void-runner": {
                title: "VOID RUNNER",
                buildPath: "Builds/VoidRunner/index.html",
                breadcrumbs: "Portfolio > My Game > Void Runner",
                description: `
                    <p>High-speed space racing across the edge of the universe.</p>
                    <br>
                    <p>Use custom shader gravity to stick to walls and ceilings while maintaining maximum velocity. Don't fall into the void.</p>`,
                tags: ["RACING", "SCI-FI", "SHADERS"],
                poster: "GamePictures/Void Runner Poster.jpg"
            }
        };

        const urlParams = new URLSearchParams(window.location.search);
        const gameId = urlParams.get('id');

        if (gameId && gameData[gameId]) {
            const data = gameData[gameId];
            
            document.getElementById('game-title').innerText = data.title;
            document.getElementById('game-breadcrumbs').innerText = data.breadcrumbs;
            document.getElementById('game-description').innerHTML = data.description;
            document.getElementById('game-poster').src = data.poster;

            // Load the Unity Game
            document.getElementById('unity-viewport').innerHTML = `
                <iframe 
                    id="unity-iframe"
                    src="${data.buildPath}"
                    allow="autoplay; fullscreen; gamepad"
                    sandbox="allow-scripts allow-same-origin allow-pointer-lock"
                ></iframe>
            `;


            const tagsContainer = document.getElementById('game-tags');
            data.tags.forEach(tagName => {
                const span = document.createElement('span');
                span.className = 'tag';
                span.innerText = tagName;
                tagsContainer.appendChild(span);
            });
        }

        function openFullscreen() {
            const elem = document.getElementById("unity-iframe");
            if (elem.requestFullscreen) { elem.requestFullscreen(); }
            else if (elem.webkitRequestFullscreen) { elem.webkitRequestFullscreen(); }
            else if (elem.msRequestFullscreen) { elem.msRequestFullscreen(); }
        }

        lucide.createIcons();
    </script>
</body>
</html>